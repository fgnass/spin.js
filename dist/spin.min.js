!function(t,e){if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define(e);else t.Spinner=e()}(this,function(){"use strict";var t=["webkit","Moz","ms","O"],e={},i;function r(t,e){var i=document.createElement(t||"div"),r;for(r in e)i[r]=e[r];return i}function o(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var n=function(){var t=r("style",{type:"text/css"});o(document.getElementsByTagName("head")[0],t);return t.sheet||t.styleSheet}();function s(t,r,o,s){var a=["opacity",r,~~(t*100),o,s].join("-"),f=.01+o/s*100,l=Math.max(1-(1-t)/r*(100-f),t),p=i.substring(0,i.indexOf("Animation")).toLowerCase(),u=p&&"-"+p+"-"||"";if(!e[a]){n.insertRule("@"+u+"keyframes "+a+"{"+"0%{opacity:"+l+"}"+f+"%{opacity:"+t+"}"+(f+.01)+"%{opacity:1}"+(f+r)%100+"%{opacity:"+t+"}"+"100%{opacity:"+l+"}"+"}",n.cssRules.length);e[a]=1}return a}function a(e,i){var r=e.style,o,n;if(r[i]!==undefined)return i;i=i.charAt(0).toUpperCase()+i.slice(1);for(n=0;n<t.length;n++){o=t[n]+i;if(r[o]!==undefined)return o}}function f(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)if(t[r]===undefined)t[r]=i[r]}return t}function p(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function u(t,e,i,o,n){var s=2*(t+e);if(s<50)s=50;return f(r("div",{innerHTML:"0%"}),{textAlign:"center",width:s+"px",height:s+"px",lineHeight:s+"px",position:"absolute",top:i-s/2+"px",left:o-s/2+"px",color:n})}var c={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative",progress:false,progressTop:0,progressLeft:0};function d(t){if(typeof this=="undefined")return new d(t);this.opts=l(t||{},d.defaults,c)}d.defaults={};l(d.prototype,{spin:function(t){this.stop();var e=this,n=e.opts,s=e.el=f(r(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),a=n.radius+n.length+n.width,l,c;if(t){t.insertBefore(s,t.firstChild||null);c=p(t);l=p(s);f(s,{left:(n.left=="auto"?c.x-l.x+(t.offsetWidth>>1):parseInt(n.left,10)+a)+"px",top:(n.top=="auto"?c.y-l.y+(t.offsetHeight>>1):parseInt(n.top,10)+a)+"px"})}s.setAttribute("role","progressbar");e.lines(s,e.opts);if(n.progress){e.progressTracker=u(n.radius,n.length,n.progressTop,n.progressLeft,n.color);o(s,e.progressTracker)}if(!i){var d=0,h=(n.lines-1)*(1-n.direction)/2,g,m=n.fps,y=m/n.speed,x=(1-n.opacity)/(y*n.trail/100),v=y/n.lines;!function w(){d++;for(var t=0;t<n.lines;t++){g=Math.max(1-(d+(n.lines-t)*v)%y*x,n.opacity);e.opacity(s,t*n.direction+h,g,n)}e.timeout=e.el&&setTimeout(w,~~(1e3/m))}()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=undefined}return this},setProgress:function(t,e){if(this.progressTracker){e=e||100;this.progressTracker.innerHTML=Math.round(t/e*100)+"%"}},lines:function(t,e){var n=0,a=(e.lines-1)*(1-e.direction)/2,l;function p(t,i){return f(r(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*n+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(;n<e.lines;n++){l=f(r(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&s(e.opacity,e.trail,a+n*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"});if(e.shadow)o(l,f(p("#000","0 0 4px "+"#000"),{top:2+"px"}));o(t,o(l,p(e.color,"0 0 1px rgba(0,0,0,.1)")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});function h(){function t(t,e){return r("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}n.addRule(".spin-vml","behavior:url(#default#VML)");d.prototype.lines=function(e,i){var r=i.length+i.width,n=2*r;function s(){return f(t("group",{coordsize:n+" "+n,coordorigin:-r+" "+-r}),{width:n,height:n})}var a=-(i.width+i.length)*2+"px",l=f(s(),{position:"absolute",top:a,left:a}),p;function u(e,n,a){o(l,o(f(s(),{rotation:360/i.lines*e+"deg",left:~~n}),o(f(t("roundrect",{arcsize:i.corners}),{width:r,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(p=1;p<=i.lines;p++)u(p,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(p=1;p<=i.lines;p++)u(p);return o(e,l)};d.prototype.opacity=function(t,e,i,r){var o=t.firstChild;r=r.shadow&&r.lines||0;if(o&&e+r<o.childNodes.length){o=o.childNodes[e+r];o=o&&o.firstChild;o=o&&o.firstChild;if(o)o.opacity=i}}}var g=f(r("group"),{behavior:"url(#default#VML)"});if(!a(g,"transform")&&g.adj)h();else i=a(g,"animation");return d});